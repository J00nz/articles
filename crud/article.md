# CRUD Pattern
---
_Management Sofware_ is a name that should apply to any data processing code.

It is a very general definition and it almost means that some data is handled, stored and retrieved when it comes to need it.

> A management software handles one or more registries and 
> helps in establishing relations between them.

In almost 99% of these programs we can identify some similar data pattern - or **actions on a registry** - that compose the **CRUD** acronym:

- **C**reate
- **R**ead
- **U**pdate
- **D**elete

These are the most common actions that are performed on a single registry.

Each action it should be splitted into some **common issues** every programmer must face when he tries to code any requirement. 

> To split a customer requirement into a _CRUD_ pattern should 
> **give a damn quick overview of the development effort** 
> it will take to code it down!



## Unique Data Identifier

The whole **CRUD** pattern works around the **ID** concept which is some kind of **unique _string_ or _number_** to be used to **identify a _record_** without any risk of confusing it with others.

> Many commercial data storage system (MySQL, MongoDB, ...) offers builtin **unique ID generation utilities**.



## Create

- display the form
- access input data
- validate input data
- create a new Identifier
- take action "save" new record
- display messages

The "create" action is the most common action on every registry. 

> There can't be any data without a create logic.

There are many way to create new data records, most of them are related to a database but there are also "create" actions that aren't.

## Read

- get the required data identifier
- query the data storage
- pack data for presentation
- show the view
- display messages

The "read" actions seem a very easy task to the most of programmers but it isn't really. 

When it comes to access data there always are exceptions, filters, permission to handle. 

> You wont show the wrong record to the wrong guy!

Then you may have to transform data in order to display it (common issue with dates and time).

When it comes to display lists of records then the list should be extremely long and you can't just send the whole recordset to the client... 

## Update

- get the required data identifier
- query the data storage
- pack data for form display
- display the form populated with actual data
- access input data
- validate input data
- take action "save" existing record
- display messages


## Delete

- get the required data identifier
- query the data storage
- take action "delete" existing record
- display messages


## Special CRUD Actions

Sometimes a standard _CRUD_ action requires some specific logic and it becomes a more complex data interaction that **inherits it's behavior** from one of the standard actions.

### Account Registration

An account registration action is a **combination of a _create_ and _update_ actions** which also are enriched with some particular logic.

The most important thing is that when you create a new user account you may want to **verify the existance of the user's email address**.

> It is important both for account's communications and legal issues that
> you are able to communicate with you account's owner.

**NOTE:** There are also more complicated variations in which you want to **prevent robots registrations**, or in which you may want to **verify a credit card number** or a mobile phone number via an SMS secret code.

Today it is pretty common to setup a **2-step authentication** that requires a combination of a password that you remember and a **one time password** which should be generated by a device you own like your smartphone. This is a very secure way to grant a high security level to you accounts but it makes everything little more complicated!


#### Create

- display the form (can be multiple steps)
- access input data
- validate input data (mail uniqueness required)
- create a new Identifier
- create a random confirmation code
- create a **pending account** record
- send a confirmation mail with an activation link
- display messages

#### Update

- get the required data identifier (mail + code)
- query the data storage for a **matching pending account**
- modify the account record status to active
- update the record into the data storage
- send a confirmation mail
- display messages


### Mailing List Subscription

[create]

### Contact Form

[create]

### Login Form

[read]

### Search Form

[read]

### List "my" Items





## Shared Issues

### Data Gathering

### Data Validation

### Error Handling (messaging)

### Handling date/time Properties

### Data Pagination
